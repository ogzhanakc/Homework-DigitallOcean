<div class="list-page">

    <div>
        <button class="create-crew" mat-fab (click)="openCrewCreate()">{{'ADD_CREW' | translate}}</button>
    </div>

    <table mat-table [dataSource]="crews" class="mat-elevation-z8">
        <ng-container matColumnDef="menu">
            <th mat-header-cell *matHeaderCellDef> </th>
            <td mat-cell *matCellDef="let element">
                <button mat-icon-button [matMenuTriggerFor]="menu" class="icon-button">
                    <mat-icon>more_vert</mat-icon>
                </button>
                <mat-menu #menu="matMenu">
                    <button mat-menu-item (click)="goCard(element)">
                        <span>{{'CARD' | translate}}</span>
                    </button>
                    <button mat-menu-item (click)="openEdit(element)">
                        <span>{{'EDIT' | translate}}</span>
                    </button>
                    <button mat-menu-item (click)="delete(element)">
                        <span>{{'DELETE' | translate}}</span>
                    </button>
                </mat-menu>
            </td>
        </ng-container>


        <ng-container matColumnDef="id" ,>
            <th mat-header-cell *matHeaderCellDef> {{ 'Id' | translate }} </th>
            <td mat-cell *matCellDef="let element"> {{element.id}} </td>
        </ng-container>
        <ng-container matColumnDef="firstName" ,>
            <th mat-header-cell *matHeaderCellDef> {{ 'FIRST_NAME' | translate }} </th>
            <td mat-cell *matCellDef="let element"> {{element.firstName}} </td>
        </ng-container>

        <ng-container matColumnDef="lastName">
            <th mat-header-cell *matHeaderCellDef> {{ 'LAST_NAME' | translate }} </th>
            <td mat-cell *matCellDef="let element"> {{element.lastName}} </td>
        </ng-container>

        <ng-container matColumnDef="nationality">
            <th mat-header-cell *matHeaderCellDef> {{ 'NATIONALITY' | translate }} </th>
            <td mat-cell *matCellDef="let element"> {{element.nationality}} </td>
        </ng-container>

        <ng-container matColumnDef="title">
            <th mat-header-cell *matHeaderCellDef> {{ 'TITLE' | translate }} </th>
            <td mat-cell *matCellDef="let element"> {{element.title}} </td>
        </ng-container>

        <ng-container matColumnDef="daysOnBoard">
            <th mat-header-cell *matHeaderCellDef> {{ 'DAYS_ON_BOARD' | translate }} </th>
            <td mat-cell *matCellDef="let element"> {{element.daysOnBoard}} </td>
        </ng-container>

        <ng-container matColumnDef="dailyRate">
            <th mat-header-cell *matHeaderCellDef> {{ 'DAILY_RATE' | translate }} </th>
            <td mat-cell *matCellDef="let element"> {{element.dailyRate}} </td>
        </ng-container>

        <ng-container matColumnDef="currency">
            <th mat-header-cell *matHeaderCellDef> {{ 'CURRENCY' | translate }} </th>
            <td mat-cell *matCellDef="let element"> {{element.currency}} </td>
        </ng-container>

        <ng-container matColumnDef="discount">
            <th mat-header-cell *matHeaderCellDef class="column-header narrow-column">
              {{ "DISCOUNT" | translate }}
            </th>
            <td mat-cell *matCellDef="let element" class="column-cell narrow-column">
              <input type="number" matInput [(ngModel)]="element.discount" (ngModelChange)="discountTotalIncome($event,element.id)"/>
            </td>
          </ng-container>

        <ng-container matColumnDef="totalIncome">
            <th mat-header-cell *matHeaderCellDef> {{ 'TOTAL_INCOME' | translate }} </th>
            <td mat-cell *matCellDef="let element"> {{element.totalIncome}} </td>
        </ng-container>



        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>

    <div class="total-income">
    
        <p>{{'TOTAL_INCOME' | translate}} USD {{totalUsd}}</p>
        <p>{{'TOTAL_INCOME' | translate}} EUR {{totalEur }}</p>
      </div>
</div>